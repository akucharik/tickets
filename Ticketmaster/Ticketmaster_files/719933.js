/* 
EFEAT2870 Fan Segment
Description: This will create a cookie "m_fanSegment" if the user is a fan.
Author: Chester Militante
Last Updated: 6/27/2016
Full version: http://git.tm.tmcs/tmlabs/monetate/blob/master/common-actions/fan-segment.js
*/

!function(){function b(){var a={"www.ticketmaster.com":"ticketmaster.com","www.stg1.ticketmaster.com":"ticketmaster.com","www.ticketmaster.ca":"ticketmaster.ca","m.ticketmaster.com":"ticketmaster.com","m.ticketmaster.ca":"ticketmaster.ca","www.livenation.com":"livenation.com","concerts.livenation.com":"livenation.com","concerts1.livenation.com":"livenation.com","www1.ticketmaster.com":"ticketmaster.com"};return a[window.location.hostname]}function c(){var a=(location.pathname.indexOf("/event/")!==-1||location.pathname.indexOf("/resale/")!==-1||location.pathname.indexOf("/exchange/")!==-1)&&location.pathname.indexOf("/checkout/")===-1;return!(0==document.referrer.length||!a)}function d(){var b=window.location.search.match("c=([^&]*)"),c=window.location.search.match("Camefrom=([^&]*)"),d=window.location.search.match("wt.mc=([^&]*)");(b||c||d)&&a.setCookie("m_cfc","true",43200);var e=document.cookie.match("m_cfc=([^;]*)");return!!e}function e(){var c=!1;if(0!==window.location.pathname.split("/")[1].length&&"section"!=window.location.pathname.split("/")[1])if(document.referrer.indexOf(b())==-1)a.removeCookie("m_enteredHome",b()),c=!1;else{var d=null!==a.readCookie("m_enteredHome");d&&(c=!0)}else a.setCookie("m_enteredHome","true",1440),c=!0;return!!c}function f(){(d()||e()||c())&&a.setCookie("m_fanSegment","true",43200)}var a={setCookie:function(a,b,c,d){var e="",f="";if(c){var g=new Date;g.setTime(g.getTime()+1e3*c*60),e="; expires="+g.toGMTString()}d&&(f="; domain="+d),document.cookie=a+"="+b+e+f+"; path=/"},readCookie:function(a){for(var b=a+"=",c=document.cookie.split(";"),d=0;d<c.length;d++){for(var e=c[d];" "===e.charAt(0);)e=e.substring(1,e.length);if(0===e.indexOf(b))return e.substring(b.length,e.length)}return null},removeCookie:function(a,b){this.setCookie(a,"",-1,b)}};f()}();