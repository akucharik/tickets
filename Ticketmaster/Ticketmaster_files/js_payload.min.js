function UIDiv(e,t){Styles.injectStylesheet("RED_uiElement",".ui-elem","position:absolute;"),t=t||"div";var n=document.createElement(t);if(Styles.addClass(n,"ui-elem"),e=e||{},e.id&&(n.id=e.id),Styles.setCss(n,e.css),e.target){var a=Markup.get(e.target);a.appendChild(n)}return Object.defineProperty(n,"parent",{get:function(){return n.parentNode}}),n.toString=function(){return"[object UIDiv]"},n}function UIComponent(e,t){var n=!0,a=!0;e=e||{},t=t||"div";var r=new UIDiv(e,t);return r._align=e.align,Object.defineProperties(r,{x:{get:function(){return Styles.getCss(r,"x")},set:function(e){Styles.setCss(r,{x:e})}},y:{get:function(){return Styles.getCss(r,"y")},set:function(e){Styles.setCss(r,{y:e})}},enabled:{get:function(){return n},set:function(e){n=e,r.dispatchEvent(UIEvent.componentEnabled)}},showing:{get:function(){return a},set:function(){}}}),"canvas"!=t&&Object.defineProperties(r,{width:{get:function(){return r.offsetWidth},set:function(e){Styles.setCss(r,{width:e});var t=new CustomEvent(UIEvent.RESIZE);t.direction="width",r.dispatchEvent(t)}},height:{get:function(){return r.offsetHeight},set:function(e){Styles.setCss(r,{height:e});var t=new CustomEvent(UIEvent.RESIZE);t.direction="height",r.dispatchEvent(t)}}}),r.hide=function(){r.style.display="none",a=!1},r.show=function(){try{r.style.removeProperty("display")}catch(e){r.style.display=null}a=!0},r.setCss=function(e){Styles.setCss(r,e)},r.addChild=function(e){var t=Markup.get(e);r.appendChild(t),e._align&&Align.set(e,e._align)},r.inspect=function(){for(var e={},t=Object.getOwnPropertyNames(r),n=0;n<t.length;n++){var a=r[t[n]];e[t[n]]=a}},r.toString=function(){return"[object UIComponent]"},r._initAlign=function(t){var n=t?1==t:void 0!=e.target;e.align&&n&&Align.set(r,e.align)},r.enabled=!0,r._initAlign(),r}function UIImage(e){function t(t){var n=i?2:1,o=r.width/r.height,d=e.css.width||r.width,u=e.css.height||r.height,c=void 0==e.css.width,p=void 0==e.css.height;if(a||(c="height"==t,p="width"==t,d=l.width,u=l.height),c){var f;f=s&&!p?u*o:d/n,l.style.width=Math.round(f)+"px"}if(p){var m;m=s&&!c?d/o:u/n,l.style.height=Math.round(m)+"px"}}function n(e){t(e.direction)}Styles.injectStylesheet("RED_uiImage",".ui-image","background-repeat:no-repeat; background-size:contain;");var a=!0,r=null,i=!1,o="contain",s=!!e.aspectRatio;e.css||{};if(!e.source)throw new Error("UIImage : No image source set on '"+e.id+"'");e.css=e.css||{};var l=new UIComponent(e);return Styles.addClass(l,"ui-image"),Object.defineProperties(l,{source:{get:function(){return r},set:function(e){r=ImageManager.get(e),l.style.backgroundImage="url("+r.src+")"}},retina:{get:function(){return i},set:function(e){i=e,t()}},ratio:{get:function(){return o},set:function(e){o=e,l.style.backgroundSize=e}},aspectRatio:{get:function(){return s},set:function(e){s=e,t()}}}),l.toString=function(){return"[object UIImage]"},l.addEventListener(UIEvent.RESIZE,n),l.source=e.source,l.retina=!!e.retina,e.ratio&&(l.ratio=e.ratio),l._initAlign(),a=!1,l}function UITextField(e){function t(){for(var t in e)if("css"==t)for(var n in e.css)switch(n){case"x":case"y":case"width":case"height":v[n]=e.css[n]}else if("bufferText"==t){v[t]={};for(var a in f)v[t][a]=e[t][a]||0}else v[t]=e[t];delete v.target,delete v.id}function n(){g||("paragraphClamp"==p||"inlineClamp"==p?r():a())}function a(){if(Styles.setCss(y,{verticalAlign:"auto",height:"auto",width:"auto"}),"paragraphFit"==p){for(var e=c;h.scrollHeight>h.offsetHeight&&!(0>=e);)e--,h.style.fontSize=e+"px";for(;h.scrollWidth>h.offsetWidth&&!(0>=e);)e--,h.style.fontSize=e+"px";c=e,h.style.fontSize=c+"px"}else if("inlineFit"==p){var t=h.offsetWidth,n=h.offsetHeight;h.style.fontSize="243px";var a=y.offsetWidth,r=y.offsetHeight;h.style.fontSize="182px";var i=y.offsetWidth,o=y.offsetHeight,s=MathUtils.rel(243,182,a,i,t),l=MathUtils.rel(243,182,r,o,n);c=~~Math.min(c,Math.min(s,l)),h.style.fontSize=c+"px"}d&&Styles.setCss(y,{verticalAlign:d,height:h.offsetHeight-f.top-f.bottom,width:h.offsetWidth-f.left-f.right})}function r(){Styles.setCss(y,{height:"auto",width:"auto"}),h.width=y.offsetWidth,h.height=y.offsetHeight}Styles.injectStylesheet("RED_uiTextfield",".ui-textfield","position:absolute; white-space:nowrap;",".smooth-text","-webkit-font-smoothing:antialiased; -moz-osx-font-smoothing:grayscale;",".ui-textfield .content","position:relative; display:table-cell; cursor:default; pointer-events:none; line-height:100%; -webkit-user-select: none; -moz-user-select: none; -ms-user-select: none;");var i,o,s,l,d,u,c=0,p="",f={top:0,bottom:0,left:0,right:0},m="",g=!0,v={};e=e||{};var h=new UIComponent(e);Styles.addClass(h,"ui-textfield");var y=document.createElement("span");return Styles.addClass(y,"content"),h.appendChild(y),Object.defineProperties(h,{alignText:{get:function(){return i},set:function(e){if(e&&i!=e){i=e;var t=(i.match(/(left|right)/gi)||["center"])[0].toLowerCase();Styles.setCss(h,{lineHeight:h.height,textAlign:t}),d=(i.match(/(bottom|top)/gi)||["middle"])[0].toLowerCase(),Styles.setCss(y,{verticalAlign:d})}}},fontSize:{get:function(){return c},set:function(e){!isNaN(e)&&e>0&&(c=e,h.style.fontSize=~~e+"px",n())}},fontFamily:{get:function(){return o},set:function(e){o=e,h.style.fontFamily=e,n()}},format:{get:function(){return p},set:function(e){if(p!=e){switch(p=e){case"paragraphClamp":case"paragraphFit":case"paragraph":Styles.setCss(h,{whiteSpace:"normal"});break;case"resizeFit":case"inlineClamp":case"inlineFit":default:Styles.setCss(h,{whiteSpace:"nowrap"})}n()}}},leading:{get:function(){return s},set:function(e){e&&s!=e&&(s=e,Styles.setCss(y,{lineHeight:100*s+"%"}),n())}},spacing:{get:function(){return Styles.getCss(h,"letterSpacing")},set:function(e){e&&l!=e&&(l=e,Styles.setCss(h,{letterSpacing:e}),n())}},bufferText:{get:function(){return f},set:function(e){if(e&&f!=e){for(var t="",a=["top","right","bottom","left"],r=0;4>r;r++){var i=a[r],o=isNaN(e)?e[i]||0:e;f[i]=o,t+=o+"px "}Styles.setCss(y,{padding:t}),n()}}},text:{get:function(){return m},set:function(e){void 0!=e&&""!=e&&(m=e,h.setDefault("text",e),y.innerHTML=e,n())}},smoothing:{get:function(){return u},set:function(e){u=e,Styles[u?"addClass":"removeClass"](y,"smooth-text")}}}),h.resetToDefault=function(){if(g=!0,arguments.length>0)for(var e=0;e<arguments.length;e++)h[arguments[e]]=v[arguments[e]];else for(var t in v)void 0!=h[t]&&(h[t]=v[t]);g=!1,n()},h.setDefault=function(e,t){v[e]=t},h.toString=function(){return"[object UITextfield]"},h.enabled=!0,t(),h.format=e.format,h.fontSize=e.fontSize,h.fontFamily=e.fontFamily||"Arial",h.alignText=e.alignText,h.bufferText=e.bufferText,h.leading=e.leading,h.spacing=e.spacing,h.smoothing=0!=e.smoothing,g=!1,h.text=e.text,h._initAlign(),h}function FrameRateBase(e){var t=this;t.pool=[],t.fps=e,t._frameTime=Math.floor(1e3/t.fps),t._prevTime=0,t._startTime=0,t._nextTime=0,t._maxLag=400,t._shiftLag=30,t._paused=!1,t._prevCallTime=Date.now(),t.diffTime=0}function GestureBase(e){var t=this;t.elem=e,t.hasActiveChildren=!0,t.debug=!1,t.eventList=[],t._isDragEnabled=!1,t._isDragging=!1,t._give=2,t._oX=0,t._oY=0,t._p1X=0,t._p1Y=0,t._p2X=0,t._p2Y=0,t._sX=0,t._sY=0,t._vX=0,t._vY=0,t._cursor="mouse",t._start="down",t._end="up",t.init()}function UIBorder(e){var t,n,a=new UIDiv(e);return Styles.addClass(a,"ui-border"),Object.defineProperties(a,{size:{get:function(){return t},set:function(e){void 0!=e&&t!=e&&(t=e,Styles.setCss(a,{borderWidth:t}))}},color:{get:function(){return n},set:function(e){e&&n!=e&&(n=e,Styles.setCss(a,{borderColor:n}))}}}),a.toString=function(){return"[object UIBorder]"},Gesture.disable(a),a.color=e.color,a.size=e.size,a}function UIButton(e){function t(t,n){var a,r=e.id+(n?"-state-"+d.length:"-bg");"string"==typeof t?a=new UIImage({target:c,id:r,source:t,css:u?{width:"inherit",height:"inherit"}:{}}):(a=t,a.id=r,c.addChild(a),/(UITextField)/gi.exec(a.toString())&&a.resetToDefault(),a._initAlign(!0)),n?(d.push(a),Styles.addClass(a,"ui-button-state")):s=a,Gesture.disable(a)}function n(){Clamp.set(c,"clamp"+(e.css.width?"":"X")+(e.css.height?"":"Y"),{},!1)}function a(e){c.togglable&&(c.state=Number(!l)),c._onClick.call(c,e),c.onClick.call(c,e)}function r(e){c._onOver.call(c,e),c.onOver.call(c,e)}function i(e){c._onOut.call(c,e),c.onOut.call(c,e)}function o(e){var t=c.enabled?"addEventListener":"removeEventListener";Gesture[t](c,GestureEvent.CLICK,a),Gesture[t](c,GestureEvent.OVER,r),Gesture[t](c,GestureEvent.OUT,i)}e=e||{},e.css=e.css||{},Styles.injectStylesheet("RED_uiButton",".ui-button","position:absolute",".ui-button-state","position: absolute; width:inherit; height:inherit;");var s,l=0,d=[],u=!!e.containChild,c=new UIComponent(e);Styles.addClass(c,"ui-button"),e.bg&&t(e.bg,!1),n(),e.icon=e.icon||[];for(var p=0;p<e.icon.length;p++)t(e.icon[p],!0);return n(),c.togglable=e.icon.length>1,Object.defineProperties(c,{bg:{get:function(){return s}},icon:{get:function(){return d}},state:{get:function(){return l},set:function(e){l=e,e>=d.length&&(l=0);for(var t=0;t<d.length;t++)d[t].style.visibility=t==l?"visible":"hidden"}}}),c.onClick=e.onClick||function(e){},c.onOver=e.onOver||function(e){},c.onOut=e.onOut||function(e){},c.toString=function(){return"[object UIButton]"},c._onClick=function(e){},c._onOver=function(e){},c._onOut=function(e){},c.addEventListener(UIEvent.ENABLED,o),c.enabled=!0,c.state=e.state||0,c._initAlign(),c}function UISlider(e){function t(t){f[t]=document.createElement("div"),Styles.addClass(f[t],"ui-slider-"+t),f[t].id=e.id+"-"+t,e[t]&&Styles.setCss(f[t],e[t]),0==e[t]&&(f[t].style.display="none"),f.appendChild(f[t]),f.elements.push(f[t])}function n(e){f.percent=e/f.offsetWidth}function a(){var e=f.handle.offsetWidth/f.offsetWidth/2,t=MathUtils.restrict(u,e,1-e)-e;return 100*t}function r(){f.dispatchEvent(UIEvent.sliderUpdate),f.onUpdate.call(f,UIEvent.sliderUpdate),f._onUpdate.call(f,UIEvent.sliderUpdate)}function i(e){c=!0,p=e.mouse.global.x-e.mouse.local.x,n(e.mouse.local.x),r()}function o(e){c=!1}function s(e){var t=e.mouse.local.x;e.mouse.global.x<=p&&(t=0),n(t),r()}function l(e){GestureEvent.stop(e)}function d(e){var t=f.enabled?"addEventListener":"removeEventListener";Gesture[t](f.hitState,GestureEvent.PRESS,i),Gesture[t](f.hitState,GestureEvent.RELEASE,o),Gesture[t](f.hitState,GestureEvent.DRAG,s),Gesture[t](f.hitState,GestureEvent.CLICK,l)}Styles.injectStylesheet("RED_uiSlider",".ui-slider","position:absolute; width:100%; height:100%;",".ui-slider-bg, .ui-slider-track, .ui-slider-loaded, .ui-slider-handle, .ui-slider-hitState","position:absolute; width:100%; height:inherit;",".ui-slider-bg","background-color: #666666;",".ui-slider-loaded","background-color: #560000; width:0%;",".ui-slider-track","background-color: #cc0000; width:0%;",".ui-slider-handle","background-color: #ffffff; width:5%; left:0%;");var u=0,c=!1,p=0;e=e||{};var f=new UIComponent(e);Styles.addClass(f,"ui-slider");var m=["bg","loaded","track","handle","hitState"];f.elements=[];for(var g=0;g<m.length;g++)t(m[g]);return Object.defineProperties(f,{percent:{get:function(){return u},set:function(e){u=MathUtils.restrict(e,0,1),f.track.style.width=100*u+"%",f.handle.style.left=a()+"%"}},dragging:{get:function(){return c}}}),f.onUpdate=e.onUpdate||function(e){},f.toString=function(){return"[object UISlider]"},f._onUpdate=function(e){},f.addEventListener(UIEvent.ENABLED,d),f.enabled=!0,f}function YouTubePlayer(e){function t(){a()?(g=!1,n()):u.player.cueVideoById(p)}function n(){u.player&&u.player.destroy(),u.player=new YT.Player(E,{width:e.css.width,height:e.css.height,videoId:p,playerVars:b}),u.player.addEventListener("onReady",o),u.player.addEventListener("onStateChange",s),u.player.addEventListener("onError",d),v=!1}function a(){var e=!1;for(var t in y)b[t]!=y[t]&&(b[t]=y[t],e=!0);return e}function r(){if(w.active)for(var e=0;e<w.pool.length;e++)w.seeked?w.pool[e].past=w.pool[e].time<u.currentTime:w.pool[e].time<u.currentTime&&!w.pool[e].past&&(w.pool[e].handler.apply(u,w.pool[e].params),w.pool[e].past=!0);w.seeked=!1}function i(e,t,n){t&&t.call(u,n),u.screen.dispatchEvent(new CustomEvent(e))}function o(n){return g=!0,m?void t():(c?u.player.mute():u.player.unMute(),i(MediaEvent.READY,u.onReady,n),void(e.autoPlay&&u.play()))}function s(e){switch(e.data){case-1:c?u.player.mute():u.player.unMute(),u.paused=!0;break;case 3:i(MediaEvent.WAITING,u.onBuffer,e);break;case 1:u.duration=u.player.getDuration(),u.paused=!1,u.complete=!1,Math.abs(u.player.getCurrentTime()-u.currentTime)>.5&&(w.seeked=!0),FrameRate.register(u,l,3),f&&!v?(v=!0,i(MediaEvent.AUTOPLAY,u.onAutoPlay,e)):i(MediaEvent.PLAY,u.onPlay,e),u.isReplay=!1;break;case 0:w.seeked=!0,u.isReplay=!0,u.complete=!0,i(MediaEvent.COMPLETE,u.onComplete,e);case 2:FrameRate.unregister(u,l,3),h||i(MediaEvent.PAUSE,u.onPause,e),h=!1,u.paused=!0;break;case 5:}}function l(){u.currentTime=u.player.getCurrentTime(),u.percent=u.currentTime/u.duration,i(MediaEvent.PROGRESS,u.onProgress),r(),u.player.getCurrentTime()>=u.player.getDuration()&&u.pause()}function d(e){i(MediaEvent.FAIL,u.onFail,e)}var u=this,c=!!e.muted;u.id=(e.id||""+Date.now())+"-youTubePlayer",u.css=e.css,u.screen=document.createElement("span"),u.isReplay=!1,u.paused=!e.autoPlay,u.percent=0,u.currentTime=0,u.duration=0,u.complete=!1,u.onReady=e.onReady||function(){},u.onComplete=e.onComplete||function(){},u.onFail=e.onFail||function(){},u.onBuffer=e.onBuffer||function(){},u.onProgress=e.onProgress||function(){},u.onPlay=e.onPlay||function(){},u.onAutoPlay=e.onAutoPlay||function(){},u.onStop=e.onStop||function(){},u.onPause=e.onPause||function(){};var p=e.videoId,f=e.autoPlay,m=!1,g=!1,v=!1,h=!1,y={autoplay:e.autoPlay?1:0,controls:e.nativeControls?1:0,showinfo:e.showInfo?1:0,modestbranding:e.inlineYouTubeLogo?0:1,fs:e.allowFullScreen?1:0,rel:e.showRelatedVideos?1:0,iv_load_policy:e.allowAnnotations?1:3,vq:e.quality||"medium"},b={};for(var C in y)b[C]=y[C];var w={pool:[],first:null,active:!1,seeked:!1};e.id=u.id,e.css.hasOwnProperty("backgroundColor")||(e.css.backgroundColor="#000000"),u.container=new UIComponent(e);var E=new UIDiv({target:u.container,css:{width:u.css.width,height:u.css.height}});if(Object.defineProperties(u,{volume:{set:function(e){u.player.setVolume(e)}},source:{get:function(){return p},set:function(e){m=!0,p=e,FrameRate.unregister(u,l,3),g&&t()}},url:{get:function(){return u.player.getVideoUrl()}},autoPlay:{get:function(){return video.autoplay},set:function(e){f=e}},muted:{get:function(){return u.player&&u.player.isMuted?u.player.isMuted():!1}},nativeControls:{get:function(){return y.controls},set:function(e){y.controls=e?1:0}},allowFullScreen:{get:function(){return y.fs},set:function(e){y.fs=e?1:0}},quality:{get:function(){return y.vq},set:function(e){y.vq=str,u.player.setPlaybackQuality(str),b.vq=str}}}),u.hide=u.container.hide,u.show=u.container.show,u.play=function(){u.player.playVideo()},u.pause=function(){u.player.pauseVideo()},u.seek=function(e){w.seeked=!0,e>u.duration?e=u.duration:u.complete=!1,u.player.seekTo(e)},u.stop=function(){i(MediaEvent.STOP,u.onStop),h=u.complete?!0:!u.paused,u.player.seekTo(0),u.pause()},u.mute=function(){u.player.mute&&(u.player.mute(),i(MediaEvent.MUTE)),u.muted=!0},u.unmute=function(){u.player.unMute&&(u.player.unMute(),i(MediaEvent.UNMUTE)),u.muted=!1},u.addCuePoint=function(e,t,n){w.active=!0;var a={time:e,handler:t,frame:-1,params:n||null,past:!1};w.pool.push(a),w.pool.sort(function(e,t){return e.time-t.time})},u.addControls=function(e){u.controls||(u.controls=new VideoControls(u,e))},u.addPoster=function(e){u.poster||("string"==typeof e&&(e={source:e}),u.poster=new UIPoster(u,e))},e.poster&&u.addPoster(e.poster),e.controls&&u.addControls(e.controls),e.cuePoints)for(var x=e.cuePoints,D=0;D<x.length;D++){var T=x[D];u.addCuePoint(T.time,T.handler,T.params)}return n(),u}function VideoPlayer(e){"use strict";function t(){if(E.active)for(var e=0;e<E.pool.length;e++)E.seeked?E.pool[e].past=E.pool[e].time<b.currentTime:E.pool[e].time<b.currentTime&&!E.pool[e].past&&(E.pool[e].handler.apply(b,E.pool[e].params),E.pool[e].past=!0);E.seeked=!1}function n(e){var t=new Audio;t.src=F.currentSrc||F.src,C=t}function a(){C={muted:!0,paused:!0,pause:function(){C.paused=!0},play:function(){C.paused=!1,F.currentTime===F.duration&&(F.currentTime=0)},volume:0},i(!0)}function r(){C=null,i(!1)}function i(e){var t=e?"addEventListener":"removeEventListener";F[t]("seeking",h,!1),F[t]("seeked",h,!1),F[t]("ended",h,!1)}function o(){return F.webkitDisplayingFullscreen?void F.play():(x||(n(),b.hasPlayed=!0,C.play(),C.pause()),void(F.buffered.length?l():(F.addEventListener("canplay",s,!1),b.load())))}function s(e){l()}function l(){b.hasPlayed=!0,C.play(),FrameRate.register(b,c),F.dispatchEvent(new CustomEvent("play")),F.dispatchEvent(new CustomEvent("playing"))}function d(){C.pause(),FrameRate.unregister(b,c),F.dispatchEvent(new CustomEvent("pause")),(F.ended||F.currentTime>=F.duration)&&F.dispatchEvent(new CustomEvent("ended")),F.webkitDisplayingFullscreen&&F.pause()}function u(){void 0==window.MpegPlugin&&_?new InlineLoader(runtimeIncludes.mpegPluginPath,{onComplete:function(e){b.screen=F=S=new MpegPlugin({source:P[P.length-1],tag:L,target:b,onReady:function(){p(),b.hasPlayed=!0},onComplete:function(){}})},onFail:g}).load():b.screen=F=S}function c(e){var t=void 0;t=x?F.currentTime+e.diffTime/1e3:C.currentTime;var n=F.duration||0,a=Math.min(n,t);F.currentTime=a,(F.ended||F.currentTime>=F.duration)&&b.pause()}function p(e){b.onReady.call(b,e)}function f(e){b.onProgress.call(b,e),t()}function m(e){E.seeked=!0,C||b.pause(),b.complete=!0,b.onComplete.call(b,e),F.dispatchEvent(new CustomEvent("complete")),w=void 0!=document.createEventObject||"ie"==Device.browser}function g(e){b.onFail.call(b,e)}function v(e){b.onBuffer.call(b,e)}function h(e){e.stopImmediatePropagation()}function y(e){x=F.muted}Styles.injectStylesheet("RED_videoPlayer","video::-webkit-media-controls-start-playback-button","display: none !important; -webkit-appearance: none;");var b=this;b.id=(e.id||""+Date.now())+"-videoPlayer",b.css=e.css||{},b.complete=!1,b.hasPlayed=!1,b.onComplete=e.onComplete||function(){},b.onFail=e.onFail||function(){},b.onBuffer=e.onBuffer||function(){},b.onProgress=e.onProgress||function(){},b.onReady=e.onReady||function(){};var C=null,w=!1,E={pool:[],active:!1,seeked:!1},x=!!e.muted,D=!!e.preload,T=!!e.autoPlay,_=!1,S=null,P=[],I=!!e.forceInline;e.id=b.id,b.container=new UIComponent(e);var L=document.createElement("video");L.id=b.id+"-screen",L.style.width="inherit",L.style.height="inherit",L.style.position="absolute",L.style.backgroundColor="#000",L.muted=x,L.preload="none",b.container.appendChild(L),b.mpgScreen=document.createElement("canvas"),b.mpgScreen.style.position="absolute",b.container.appendChild(b.mpgScreen),b.underControls=document.createElement("div"),b.underControls.id=b.id+"-underControls",b.underControls.style.position="absolute",b.container.appendChild(b.underControls);var F=L;if(b.screen=F,Object.defineProperties(b,{autoPlay:{get:function(){return T},set:function(e){T=e,e?"desktop"!=Device.type&&("android"==Device.brand?u():a()):I&&"iphone"==Device.product?a():(b.screen=F=L,r(),S&&(S.canvas.style.visibility="hidden"))}},currentTime:{get:function(){return F.currentTime}},duration:{get:function(){return F.duration||0}},paused:{get:function(){return C?C.paused:F.paused}},percent:{get:function(){return F.currentTime/F.duration||0}},source:{get:function(){return F.src},set:function(e){Array.isArray(e)?e.sort(function(e,t){var n=LoaderUtils.getFileType(e),a=LoaderUtils.getFileType(t),r="mpg"==n||"js"==n,i="mpg"==a||"js"==a;return _=r||i,r?1:-1}):e=[e];for(var t=0;t<e.length;t++)e[t]=matchProtocolTo(e[t]);P=e.slice(),F.preload="none",F.src=e[0]}},volume:{get:function(){return C&&C instanceof Audio?C.volume:L.volume},set:function(e){L.volume=e,C&&(C.volume=e)}},muted:{get:function(){return x}},forceInline:{get:function(){return I},set:function(e){I=e,b.autoPlay=T}}}),b.load=function(){F.load()},b.play=function(){b.complete=!1,F.removeAttribute("preload"),FrameRate.register(b,f),b.hasPlayed=!0,C?o():F.play(),w&&F.dispatchEvent(new CustomEvent("play"))},b.pause=function(){FrameRate.unregister(b,f),C?d():F.pause()},b.seek=function(e){E.seeked=!0,e>F.duration?e=F.duration:b.complete=!1,F==S?F.seek(e):F.currentTime=e},b.stop=function(){b.pause(),b.complete=!0,F.currentTime=0,F.dispatchEvent(new CustomEvent("stop"))},b.mute=function(){F.muted=x=!0,C&&(C.muted=!0)},b.unmute=function(){F.muted=x=!1,C&&(C.muted=!1)},b.resize=function(e,t){F.width=b.css.width=e,F.height=b.css.height=t,b.container.style.width=e+"px",b.container.style.height=t+"px"},b.addCuePoint=function(e,t,n){E.active=!0;var a={time:e,handler:t,frame:-1,params:n||null,past:!1};E.pool.push(a),E.pool.sort(function(e,t){return e.time-t.time})},b.addControls=function(e){b.controls||(b.controls=new VideoControls(b,e))},b.addPoster=function(e){b.poster||("string"==typeof e&&(e={source:e}),b.poster=new UIPoster(b,e))},b.show=b.container.show,b.hide=b.container.hide,e.poster&&b.addPoster(e.poster),e.controls&&b.addControls(e.controls),e.cuePoints)for(var A=e.cuePoints,k=0;k<A.length;k++){var U=A[k];b.addCuePoint(U.time,U.handler,U.params)}F.addEventListener("ended",m,!1),F.addEventListener("error",g,!1),F.addEventListener("waiting",v,!1),F.addEventListener("canplay",p,!1),F.addEventListener("volumechange",y,!1),e.source&&(b.source=e.source),b.autoPlay=T,!x&&e.volume&&(b.volume=e.volume),T?"desktop"==Device.type?b.play():x&&"android"!=Device.brand&&b.play():D&&b.load()}function VideoControls(e,t){function n(t,n){for(var a=0;a<h.length;a++){var r=h[a];if(void 0!=t[r]&&0!=t[r]){var i=t[r];if(i.target=n,i.id=n.id+"-"+r,i.containChild=n==y.controlBar,n[r]=function(){switch(r){case"buttonPlayPause":return new UIButtonPlayPause(e,i);case"buttonReplay":return new UIButtonReplay(e,i);case"buttonMute":return new UIButtonMute(e,i);case"buttonFullScreen":return new UIButtonFullScreen(e,i);case"sliderVolume":return new UISliderVolume(e,i);case"sliderProgress":return new UISliderProgress(e,i);case"timeDisplay":return new UITimeDisplay(e,i)}}(),n==y.controlBar){if("sliderProgress"==r&&!t.sliderProgress.inline)continue;Styles.addClass(y.controlBar[r],"rvp-controlBar-elem",4>a?"left":"right")}}}n==y.controlBar&&(v=[y.controlBar],n.sliderProgress&&!t.sliderProgress.inline&&(Styles.addClass(n.sliderProgress,"rvp-progress-non-inline"),y.controlBarContainer.appendChild(n.sliderProgress),y.controlBarContainer.appendChild(y.controlBar),v.push(n.sliderProgress)))}function a(e){e=void 0!=e?e:.5,y.controlBar&&TweenLite.to(v,e,{alpha:0})}function r(){y.controlBar&&TweenLite.to(v,.3,{alpha:1})}function i(t){return setTimeout(function(){e.paused||!y.controlBar||y.controlBar.constant||a()},t)}function o(t){clearTimeout(f),f=i(1500),!e.complete&&e.hasPlayed&&r()}function s(e){y.enabled&&r(),y.controlBar&&!y.controlBar.constant&&(f=i(2e3))}function l(t){e.seek(0),e.play(),y.replayOnInteraction=!1}function d(t){e.muted||e.unmute(),y.unmuteOnInteraction=!1}function u(e){y.controlBar&&(y.controlBar.showOnPoster?r():a(),y.controlBar.buttonReplay&&y.controlBar.buttonPlayPause.hide())}function c(t){var n=y.enabled?"addEventListener":"removeEventListener";e.container[n]("mousemove",o)}function p(e){GestureEvent.stop(e)}new UIButton,new UISlider,new UITextField,Styles.injectStylesheet("RED_uiVideoControls",".rvp-controls","width:inherit; height:inherit; position:absolute; display:table;",".rvp-controlBar-container","position:relative; width:inherit; height:inherit; vertical-align:bottom; display:table-cell;",".rvp-controlBar","width:100%; height:30px; position:relative;",".rvp-controlBar-elem","position:relative;",".rvp-controlBar .left","float:left;",".rvp-controlBar .right","float:right;",".rvp-controlBar-container .ui-button","width:30px; height:30px;",".rvp-controlBar-container .ui-button-state","background-size: 75%; background-position:50% 50%;",".rvp-controlBar .ui-slider-handle","height: 70%; top: 15%;",".rvp-controlBar .ui-slider-bg","height: 30%; top: 35%;",".rvp-controlBar .ui-slider-loaded, .rvp-controlBar .ui-slider-track","height:30%; top:35%;",".rvp-time-display","height:inherit; padding:0 5px;",".rvp-time-display span","white-space: nowrap; font-size: 12pt; color: #ffffff; line-height: 30px;",".rvp-progress-non-inline","position:relative;",".rvp-progress-non-inline .ui-slider-bg, .rvp-progress-non-inline .ui-slider-loaded, .rvp-progress-non-inline .ui-slider-handle, .rvp-progress-non-inline .ui-slider-track,  .rvp-progress-non-inline .ui-slider-hitState","bottom:0px;");var f,m,g,v,h=["buttonPlayPause","buttonReplay","timeDisplay","sliderProgress","buttonFullScreen","sliderVolume","buttonMute"];t.target=t.target||e.container,t.id=t.id||"video-controls";var y=new UIComponent(t);if(Styles.addClass(y,"rvp-controls"),t.onScreen&&n(t.onScreen,y),t.onControlBar){y.controlBarContainer=new UIComponent({target:y}),y.controlBarContainer.classList.add("rvp-controlBar-container");var b=t.onControlBar.controlBar||{};y.controlBar=new UIControlBar(e,{id:"controlBar",target:y.controlBarContainer,css:b.css||{},constant:b.constant,showOnPoster:b.showOnPoster}),n(t.onControlBar,y.controlBar)}return Object.defineProperties(y,{replayOnInteraction:{get:function(){return m},set:function(t){m=t,y.enabled||(t=!1);var n=t?"addEventListener":"removeEventListener";Gesture[n](e.container,GestureEvent.CLICK,l)}},unmuteOnInteraction:{get:function(){return g},set:function(t){g=t,y.enabled||(t=!1);var n=t?"addEventListener":"removeEventListener";Gesture[n](e.container,GestureEvent.CLICK,d)}}}),y.toString=function(){return"[object VideoControls]"},e.screen.addEventListener("play",s),e.screen.addEventListener("autoplay",s),e.screen.addEventListener("complete",u,!1),e.screen.addEventListener("ended",u,!1),e.screen.addEventListener("stop",u,!1),y.addEventListener(UIEvent.ENABLED,c),y.enabled=0!=t.enabled,y.replayOnInteraction=!!t.replayOnInteraction,y.unmuteOnInteraction=!!t.unmuteOnInteraction,y.controlBar&&!y.controlBar.showOnPoster&&a(0),Gesture.addEventListener(e.container,GestureEvent.CLICK,p),Gesture.disable(y),y}function UIControlBar(e,t){var n=new UIComponent(t);return Styles.addClass(n,"rvp-controlBar"),n.constant=!!t.constant,n.showOnPoster=!!t.showOnPoster,n.toString=function(){return"[object UIControlBar]"},n}function UIButtonPlayPause(e,t){function n(e){o.state=1,o.show()}function a(e){o.state=0}function r(e){a(e)}function i(t){var i=e.screen,s=o.enabled?"addEventListener":"removeEventListener";i[s]("autoplay",n,!1),i[s]("play",n,!1),i[s]("pause",a,!1),i[s]("ended",r,!1),i[s]("stop",r,!1)}var o=new UIButton(t);return o.toString=function(){return"[object UIButtonPlayPause]"},o._onClick=function(t){e.paused?e.play():e.pause()},o.addEventListener(UIEvent.ENABLED,i),o.enabled=!0,o}function UIButtonReplay(e,t){function n(e){i.hide()}function a(e){i.show()}function r(t){var r=e.screen,o=i.enabled?"addEventListener":"removeEventListener";r[o]("play",n,!1),r[o]("ended",a,!1),r[o]("complete",a,!1),r[o]("stop",a,!1)}var i=new UIButton(t);return i.toString=function(){return"[object UIButtonReplay]"},i._onClick=function(t){e.seek(0),e.play(),i.hide()},i.addEventListener(UIEvent.ENABLED,r),i.enabled=!0,i.hide(),i}function UIButtonMute(e,t){function n(t){r.state=Number(e.muted||0==e.screen.volume)}function a(t){var a=r.enabled?"addEventListener":"removeEventListener";e.screen[a]("volumechange",n,!1)}var r=new UIButton(t);return r.toString=function(){return"[object UIButtonMute]"},r._onClick=function(t){e.muted?e.unmute(t):e.mute(t)},r.addEventListener(UIEvent.ENABLED,a),r.enabled=!0,n(),r}function UIButtonFullScreen(e,t){function n(e){FullScreen.exit()}function a(t){var a=r.enabled?"addEventListener":"removeEventListener";e.screen[a]("ended",n,!1)}var r=new UIButton(t);return r._onClick=function(t){GestureEvent.stop(t),FullScreen.enter(e.screen)},r.addEventListener(UIEvent.ENABLED,a),r.enabled=!0,r}function UISliderVolume(e,t){function n(t){e.screen.muted=!1}function a(t){if(!o.dragging){var n=e.screen.muted?0:e.screen.volume;o.percent=n}}function r(t){e.screen.volume=o.percent}function i(t){var i=o.enabled?"addEventListener":"removeEventListener";Gesture[i](o.hitState,GestureEvent.PRESS,n),e.screen[i]("volumechange",a),o[i](UIEvent.SLIDER_UPDATE,r)}var o=new UISlider(t);return o.toString=function(){return"[object UISliderVolume]"},o.addEventListener(UIEvent.ENABLED,i),o.enabled=!0,a(),o}function UISliderProgress(e,t){function n(){return setTimeout(function(){e.paused||v||h.onOut.call(h)},h.outDelayTime)}function a(e){FrameRate[e?"register":"unregister"](h,s)}function r(e){a(!0)}function i(e){a(!1)}function o(e){a(!1),s()}function s(){h.percent=e.screen.currentTime/e.screen.duration}function l(e){FrameRate.register(h,d,6)}function d(){if(e.screen.buffered.length>0){var t=e.screen.buffered.length-1,n=e.screen.buffered.end(t)/e.screen.duration;h.loaded.style.width=100*n+"%",n>=.999&&FrameRate.unregister(h,d,6)}}function u(t){v=!0,e.paused||e.complete||h.onOver.call(h,t)}function c(e){v=!1}function p(e){clearTimeout(g),g=n()}function f(t){var n=e.screen.duration*h.percent;e.seek(n)}function m(e){var t=h.enabled?"addEventListener":"removeEventListener";h[t](UIEvent.SLIDER_UPDATE,f),h[t]("mousemove",p),Gesture[t](h,GestureEvent.OVER,u),Gesture[t](h,GestureEvent.OUT,c)}var g,v=!1,h=new UISlider(t);return h.outDelayTime=1e3,h.onOver=t.onOver||function(e){},h.onOut=t.onOut||function(e){},h.toString=function(){return"[object UISliderProgress]"},h.addEventListener(UIEvent.ENABLED,m),e.screen.addEventListener("ended",o,!1),e.screen.addEventListener("play",r,!1),e.screen.addEventListener("pause",i,!1),e.screen.addEventListener("loadstart",l,!1),h.enabled=0!=t.enabled,h}function UIPoster(e,t){function n(t){e.screen.currentTime>0&&e.screen.currentTime<e.screen.duration&&o.hide()}function a(t){0==e.screen.currentTime&&o.show()}function r(e){o.show()}function i(t){var i=e.screen,s=o.enabled?"addEventListener":"removeEventListener";i[s]("autoplay",o.hide,!1),i[s]("play",o.hide,!1),i[s]("pause",a,!1),i[s]("timeupdate",n,!1),i[s]("complete",r,!1),i[s]("ended",r,!1),i[s]("stop",r,!1)}Styles.injectStylesheet("RED_uiVideoPoster",".rvp-poster","background-position:50% 50%;"),t.css=t.css||{},t.css.width=t.css.width||"inherit",t.css.height=t.css.height||"inherit";var o=new UIImage(t);return Styles.addClass(o,"rvp-poster"),(t.target||e.container).appendChild(o),o.toString=function(){return"[object UIPoster]"},o.addEventListener(UIEvent.ENABLED,i),o.enabled=!0,o}function UITimeDisplay(e,t){function n(e){e=e||0;var t=Math.floor(e/60),n=Math.floor(e-60*t);return 10>n&&(n="0"+n),t+":"+n}function a(){s.text=u+d}function r(e){s.showDuration=l}function i(t){u=n(e.screen.currentTime),a()}function o(t){var n=s.enabled?"addEventListener":"removeEventListener";e.screen[n]("loadeddata",r,!1),e.screen[n]("timeupdate",i,!1)}var s=new UITextField(t);Styles.addClass(s,"rvp-time-display"),s.childNodes[0].setAttribute("class","rvp-time-display span");var l=!0,d="0:00",u="0:00";return Object.defineProperty(s,"showDuration",{get:function(){return l},set:function(t){l=t,d=t?" / "+n(e.screen.duration):""}}),s.toString=function(){return"[object UITimeDisplay]"},s.addEventListener(UIEvent.ENABLED,o),s.enabled=!0,s.showDuration=0!=t.showDuration,a(),s}function AdData(){var e=this;e.elements={},e.elements.redAdContainer=Markup.get("redAdContainer"),e.edgeData=new EdgeData,e.firstCollapse=!0,e.clickExpand=!1,e.showMainVid=!1,e.expandComplete=!1,e.canClose=!1,e.hideForIntro=[],e.closeTimeout,e.closeDelay=100,e.videoTimeout,e.introTimeoutDelay=5e3,e.introFailed,e.vidTimeoutFail=function(){global.failAd(),e.introFailed=!0},e.clearIntroDelay=function(){e.videoTimeout=clearTimeout(e.videoTimeout)}}function ExpandCloseButton(e){var t=this;return t._init(e),t}var PrepareCore=new function(){function e(e){ImageManager.addFbaImages(e)}function t(){if("undefined"!=typeof views){var e=views.call();e.length&&(i.wait(),global.Views={},global.ViewStyles={},new ViewLoader(e,{name:"viewLoader",onComplete:function(){i.done();
}}).load())}}function n(){ImageManager.addLoader(new Loader(assets.images,{name:"indexImages",prepend:adParams.imagesPath})),ImageManager.addLoader(new Loader(assets.edgeImages,{name:"edgeImages",prepend:adParams.edgePath}))}function a(){i.wait(),fontLoader=new Loader({name:"fontLoader",onComplete:r,onFail:global.failAd,scope:o}),fontLoader.add(new Loader(assets.fonts,{name:"fontSubLoader",prepend:adParams.fontsPath,fileType:"ttf"})),fontLoader.add(new Loader(assets.edgeFonts,{name:"fontEdgeSubLoader",prepend:adParams.fontsPath,fileType:"ttf"})),fontLoader.load()}function r(){i.done()}var i,o=this;o.init=function(r,o){if("undefined"==typeof global.async)throw new Error("Index migration required. To avoid migration, rollback core/js/control/PrepareCore.js");i=new Async,i.onComplete(r),i.wait(),o&&e(o),t(),n(),a(),Device.init(),Device.trace(),CssManager.init(),i.done()}},Device=new function(){var e=this;e.pixelRatio=window.devicePixelRatio||"unknown",Object.defineProperties(e,{orientation:{get:function(){return window.innerWidth>window.innerHeight?"landscape":"portrait"}},dimensions:{get:function(){return{width:window.innerWidth,height:window.innerHeight}}}}),e.init=function(){e.agentString=navigator.userAgent;for(var t in e)"init"!=t&&"trace"!=t&&"function"==typeof e[t]&&e[t].call()},e.trace=function(){var t=Array(70).join("-"),n="\n"+t;n+="\n AGENT:\n\n	"+e.agentString+"\n",n+="\n  Brand:			"+e.brand,n+="\n  Product:			"+e.product,n+="\n  Type:				"+e.type,n+="\n  Os:				"+e.os+" - "+e.osVersion,n+="\n  Browser:			"+e.browser+" - "+e.browserVersion,n+="\n  Dimensions: 		"+e.dimensions.width+"x"+e.dimensions.height,n+="\n  Orientation:		"+e.orientation,n+="\n  Pixel Ratio:		"+e.pixelRatio,n+="\n"+t},e._getType=function(){var t=/(android|mobile)/gi.exec(e.agentString),n=/(tablet|touch)/gi.exec(e.agentString),a=/(ipad)/gi.exec(e.agentString);e.type="desktop",t&&(e.type="mobile"),n&&(e.type="tablet"),a&&(e.type="tablet")},e._getBrandAndOS=function(){var t=e.agentString.match(/ip(hone|od|ad)|mac/gi);if(t){e.brand="apple",e.product=t[0].toLowerCase();var n=/(OS\s)(\X\s|)([\d\.\_]+)/gi.exec(e.agentString);return e.os=""==n[2]?"ios":"osx",void(e.osVersion=n[3].replace(/\_/g,"."))}var a=/(android)\/?\s*([0-9\.]+)/gi.exec(e.agentString);if(a)return e.brand=e.product=e.os=a[1].toLowerCase(),void(e.osVersion=a[2]);var r=/(windows\snt\s|windows\sphone)\/?\s*([0-9\.]+)/gi.exec(e.agentString);if(r){switch(e.brand="microsoft",e.os="windows",r[2]){case"5.2":e.osVersion="xp";break;case"6.0":e.osVersion="vista";break;case"6.1":e.osVersion="7";break;case"6.2":e.osVersion="8";break;case"6.3":e.osVersion="8.1";break;case"10.0":e.osVersion="10";break;default:e.osVersion=r[2]}return e.product=r[1].toLowerCase(),void(e.product.match(/\snt/i)&&(e.product="pc"))}var i=e.agentString.match(/(blackberry|bb10|playbook)/i);i&&(e.brand=e.product=e.os="blackberry",e.osVersion=/(version)\/?\s*([0-9\.]+)/gi.exec(e.agentString)[2])},e._getBrowser=function(){var t=/(edge(?=\/))\/?\s*([0-9\.]+)/i.exec(e.agentString);if(t||(t=e.agentString.match(/(fban|fbav|opera|chrome|crios|safari|firefox|msie|trident(?=\/))\/?\s*([0-9\.]+)/i)),!t||t.length<3){switch(e.os){case"ios":e.browser="safari";break;case"windows":e.browser="trident";break;default:e.browser="chrome"}return void(e.browserVersion="os-default")}switch(e.browser=t[1].toLowerCase(),e.browserVersion=t[2],e.browser){case"trident":var n=/\brv:+(\d+)/g.exec(e.agentString);n&&(e.browserVersion=n[1]);case"msie":e.browser="ie";break;case"crios":e.browser="chrome";break;case"safari":var n=e.agentString.match(/\sversion\/([0-9\.]+)\s/i);n&&(e.browserVersion=n[1]);break;case"chrome":var n=e.agentString.match(/\b(OPR)\/([0-9\.]+)/i);n&&(e.browser="opera",e.browserVersion=n[2])}}},CssManager=new function(){function e(){return/^[+-]?[0-9]*\.?[0-9]+/}function t(){return/^-*(moz-*|webkit-*|ms-*|o-)/i}var n=this;n.init=function(){n.generateBrowserKeyDictionary()},n.debug_level1=!1,n.debug_level2=!1,n.filter,n.debug_element,n.debug_css_list,n.setDebugLevel=function(e){switch(parseInt(e)){case 1:n.debug_level1=!0,n.debug_level2=!1;break;case 2:n.debug_level1=!0,n.debug_level2=!0;break;default:n.debug_level1=!1,n.debug_level2=!1}},n.setDebugFilter=function(e){n.filter=e,n.debug_level1=!0},n.ifDebug=function(e){return n.filter?n.passDebugFilter()&&n[e]?!0:void 0:n[e]},n.passDebugFilter=function(){if(n.debug_element&&n.debug_element.id.indexOf(n.filter)>-1)return!0;if(n.debug_css_list)for(var e in n.debug_css_list){if(e.indexOf(n.filter)>-1)return!0;if(String(n.debug_css_list[e]).indexOf(n.filter)>-1)return!0}return!1},n.deviceKeyDict,n.generateBrowserKeyDictionary=function(){n.deviceKeyDict={};var e=document.createElement("div").style;for(var t in e){var a=n.getPrefix(t),r=n.standardizeKey(t);switch(Device.browser){case"safari":"webkit"==a?n.deviceKeyDict[r]=n.prependPrefix("webkit",r):n.prependPrefix("webkit",r)in e||(n.deviceKeyDict[r]=r);break;case"firefox":var i=n.prependPrefix("Moz",r),o=n.prependPrefix("Webkit",r);r in e?n.deviceKeyDict[r]=r:"moz"==a?n.camelateKey("webkit-"+r)in e&&(n.deviceKeyDict[r]=i):"webkit"==a&&(i in e||(n.deviceKeyDict[r]=o));break;case"chrome":case"ie":default:r in e?n.deviceKeyDict[r]=r:a&&(n.deviceKeyDict[r]=n.prependPrefix(a,r))}}},n.apply=function(e,t){n.debug_element=e,n.debug_css_list=t;for(var a in t)a.match(/^transform\(/)?n.applyTransform(e,a,t[a]):e.style[n.getDeviceKey(a)]=t[a];n.debug_element=null,n.debug_css_list=null},n.conformCssObject=function(e,t){n.debug_element=t;var a={};if(e)for(var r in e){var i=n.conformKeyValue(r,e[r]);for(var o in i)a[i[o][0]]=i[o][1]}return n.debug_element=null,a},n.conformCssString=function(e,t){n.debug_element=t;var a={};if(e){var r=e.split(/\s*;\s*/);for(var i in r)if(r[i]){var o=r[i].split(/:(.+)?/),s=n.conformKeyValue(o[0],o[1]);for(var l in s)a[s[l][0]]=s[l][1]}}return n.debug_element=null,a},n.conformCssKeyValue=function(e,t){var a={};return a[e]=t,n.conformCssObject(a)},n.applyTransform=function(e,t,a){var r=new Matrix2D,i=e.style[n.getDeviceKey("transform")],o=i.match(/matrix[^\)]+\)/);o&&r.setFromCss(o[0]);var s=t.match(/\(\s([^\s]+)/)[1];if("transforms"in e)var l=e.transforms;else var l={tx:0,ty:0,rz:0,sx:1,sy:1};var d=-1*l[s];switch(s){case"tx":r.translate(d,0),r.translate(a,0);break;case"ty":r.translate(0,d),r.translate(0,a);break;case"rz":r.rotate(d*Math.PI/180),r.rotate(a*Math.PI/180);break;case"sx":d=1,r.scale(d,1),r.scale(a,1);break;case"sy":d=1,r.scale(1,d),r.scale(1,a)}l[s]=a,e.transforms=l,e.style[n.getDeviceKey("transform")]=r.getCss()},n.conformKeyValue=function(e,t){e=String(e).trim(),t=String(t).trim();var a=n.standardizeKey(e);return n.conformValue(a,t)},n.hasPrefix=function(e){return e.search(t())>-1},n.getPrefix=function(e){var n=e.match(t());return n?n[1].replace(/-/g,"").toLowerCase():null},n.stripPrefix=function(e){var n=e.replace(t(),"");return n.charAt(0).toLowerCase()+n.slice(1)},n.getDeviceKey=function(e){return e in n.deviceKeyDict?n.deviceKeyDict[e]:e},n.prependPrefix=function(e,t){return e+t.replace(/^(.)/,function(e){return e.charAt(0).toUpperCase()})},n.standardizeKey=function(e){return e=n.stripPrefix(e),e=e in n.keyFormatExceptions()?n.keyFormatExceptions()[e]:n.camelateKey(e)},n.camelateKey=function(e){return e=e.replace(/-(.)/g,function(e){return e.charAt(1).toUpperCase()})},n.keyFormatExceptions=function(){return{x:"transform( tx )",translateX:"transform( tx )",y:"transform( ty )",translateY:"transform( ty )",rotate:"transform( rz )",rotation:"transform( rz )",scaleX:"transform( sx )",scaleY:"transform( sy )"}},n.conformValue=function(t,n){var a,r=[],i=n.match(/\s/),o=n.match(e());if(!i&&o){a=Number(o[0]);var s=n.match(/[^0-9\.]+$/);if(s)a+=s[0];else switch(t){case"top":case"right":case"bottom":case"left":case"width":case"height":case"fontSize":case"lineHeight":case"borderRadius":case"padding":case"margin":case"marginRight":case"marginLeft":case"marginTop":case"marginBottom":case"borderRadius":case"borderWidth":case"letterSpacing":a+="px"}}else if("backgroundImage"==t)n=n.replace(/^url\(\s*['"]*/,"").replace(/['"]*\s*\)$/,""),a='url( "'+n+'" )';else if("transform"==t)for(var l=/([a-z0-9]+)\(([^\)]+)\)/gi;params=l.exec(n);){var d=params[2].replace(/\s/g,"").split(",").map(function(t,n,a){return Number(t.match(e())[0])});switch(params[1]){case"translate":r.push(["transform( tx )",d[0]]),r.push(["transform( ty )",d[1]]);break;case"translateX":r.push(["transform( tx )",d[0]]);break;case"translateY":r.push(["transform( ty )",d[0]]);break;case"rotate":r.push(["transform( rz )",d[0]]);break;case"scale":r.push(["transform( sx )",d[0]]),r.push(["transform( sy )",d[1]]);break;case"scaleX":r.push(["transform( sx )",d[0]]);break;case"scaleY":r.push(["transform( sy )",d[0]])}}else a=n;return void 0!=a&&r.push([t,a]),r}},ImageManager=new function(){function e(e){for(var t=0;t<e.length;t++)if(e[t]instanceof Image||e[t]instanceof SVGElement){var n=e[t];c[n.id]=n}for(var t=0;t<m.length;t++)m[t].call();u.length>0&&o.load(u)}function t(e){var t=void 0!=c[e];return t}function n(t){p=!1,e(t.getAllContentRaw())}function a(){p=!1,i.call()}var r,i,o=this,s=[],l=[],d=[],u=[],c={},p=!1,f=0,m=function(){};o.addToLoad=function(e,n){var a=LoaderUtils.getFileName(e);if(!t(a)){var r=n&&1==n.forCanvas;r?l.push(e):s.push(e)}return a},o.addLoader=function(e){d.push(e)},o.get=function(e){if(c[e])return c[e];throw new Error("ImageManager : No image named '"+e+"' has been loaded")},o.load=function(e,t){if(i=t||global.failAd,p)u.push(e);else{r=new Loader({name:"imageManagerLoader",onComplete:n,onFail:a}),m=[].concat(e),u=[];var o=s.slice();s=[],r.add(new Loader(o,{name:"dynamicImages-"+f++,fileType:"jpg"}));var c=l.slice();l=[],r.add(new Loader(c,{name:"dynamicCanvasImages-"+f++,fileType:"jpg",crossOrigin:"anonymous"}));var g=d.slice();d=[];for(var v=0;v<g.length;v++)r.add(g[v]);p=!0,r.load()}},o.addFbaImages=function(t){t&&e(t.getAllContentRaw())}},Styles=new function(){var e=this;e.setCss=function(e,t){e=Markup.get(e);var n={};if(arguments.length>2)for(var a=1;a<arguments.length;a+=2)n=CssManager.conformCssKeyValue(arguments[a],arguments[a+1]);else n="string"==typeof arguments[1]?CssManager.conformCssString(arguments[1],e):CssManager.conformCssObject(arguments[1],e);CssManager.apply(e,n)},e.getCss=function(e,t){e=Markup.get(e);var n;if("x"==t||"y"==t){var a=e.style[CssManager.getDeviceKey("transform")],r=a.replace(/[\s\(\)matrix]/g,"").split(",");n=r.length<6?0:+r["x"==t?4:5]}else{var i=window.getComputedStyle(e,null);n=i.getPropertyValue(t).replace(/px/,""),isNaN(n)||(n=parseInt(n,10))}return n},e.injectStylesheet=function(e,t){if(!document.getElementById(e)){var n=document.createElement("style");n.type="text/css",n.id=e;var a=2===arguments.length?t:"";if(arguments.length>2)for(var r=0;r<arguments.length-1;r+=2){var i=arguments[r+1].replace(/\,\s+/g,",");a+=i,a+=" { "+(arguments[r+2]||"")+" }\n"}n.innerHTML=a,document.getElementsByTagName("head")[0].appendChild(n)}},e.addClass=function(e,t){for(var n=Markup.get(e),a=0;a<arguments.length-1;a++)n.classList.add(arguments[a+1])},e.removeClass=function(e,t){var n=Markup.get(e);n.classList.remove(t)}},Markup=new function(){var e=this;e.get=function(e,t){if("string"!=typeof e)return e;switch(t=t||document,e=e.trim(),e[0]){case"#":return t.getElementById(e.slice(1));case".":return t.getElementsByClassName(e.slice(1));case"<":return t.getElementsByTagName(e.slice(1,e.length-1));default:return t.getElementById(e)}},e.getElement=function(t,n){return e.get(t,n)},e.removeChildren=function(e){for(var t=Markup.get(e);t.firstChild;)t.removeChild(t.firstChild)},e.applyContainerCss=function(e,t){t.css||(t.css={}),t.css.position||(t.css.position="absolute"),Styles.setCss(e,t.css),Styles.setCss(e,t.styles)},e.addiFrame=function(e){var t=document.createElement("iFrame");return t.id=e.id,t.width=e.css.width,t.height=e.css.height,delete e.css.width,delete e.css.height,t.setAttribute("src",e.source),t.setAttribute("frameborder","0"),t.setAttribute("scrolling","no"),t.setAttribute("allowfullscreen",""),Markup.applyContainerCss(t,e),e.target.appendChild(t),t},e.addSvg=function(e){var t="http://www.w3.org/2000/svg",n=document.createElementNS(t,"svg");n.setAttribute("height",e.height),n.setAttribute("width",e.width);var a=document.createElementNS(t,"path");return a.setAttribute("d",e.d),a.setAttribute("fill",e.fill),void 0!=e.stroke&&a.setAttribute("stroke",e.stroke),void 0!=e.strokeWidth&&a.setAttribute("stroke-width",e.strokeWidth),n.appendChild(a),Markup.applyContainerCss(n,e),e.target.appendChild(n),n},e.applyToElements=function(e){if(void 0===e.elements.length)e.method.call(e.scope,e.elements,e.methodArg);else{var t;for(t=0;t<e.elements.length;t++){var n=e.elements[t];e.method.call(e.scope,n,e.methodArg)}}}},Align=function(){function e(e,t){var i=e.canvas||Markup.get(e),o={},s=t.snap!==!1,l=a(e)?0:1;"string"==typeof t&&(t=n(t));for(var d in t)if("x"==d||"y"==d){var u=t[d];if(!u)continue;"string"==typeof u&&(u={type:u});var c,p,f,m=0,g=!1;if(u.against){f=!0,c=u.against;var v=0;a(c)?c.canvas?v=1:m=Styles.getCss(c,d):"number"==typeof c?(g=!0,m=c):(m=c[d],v=1),p=r[v][d]}else c=i[r[l].parent],p=r[l][d];var h=i[r[l][d]];e.qualityScale&&(h/=e.qualityScale);var y=n(u.type,h,g?0:c[p],!g&&!!t[d].outer);null!=y&&(y+=m+(u.offset||0),o[d]=s?Math.round(y):y)}return o}function t(t,n){var r=e(t,n);if(a(t)){var i=t.canvas||Markup.get(t);Styles.setCss(i,r)}else for(var o in r)t[o]=r[o];return r}function n(e,t,n,a){var r=1==arguments.length;switch(e){case"alignBottom":if(a&&(t=0),!r)return n-t;case"alignTop":return r?{y:e}:a?-t:0;case"alignRight":if(a&&(n=0),!r)return n-t;case"alignLeft":return r?{x:e}:a?n:0;case"alignCenter":return a&&(n=0),r?{x:e,y:e}:(n-t)/2;default:return null}}function a(e){return e instanceof HTMLElement||void 0!=e.canvas}var r=[{x:"offsetWidth",y:"offsetHeight",parent:"parentNode"},{x:"width",y:"height",parent:"stage"}];return{BOTTOM:"alignBottom",CENTER:"alignCenter",LEFT:"alignLeft",RIGHT:"alignRight",TOP:"alignTop",BOTTOM_LEFT:"alignBottomLeft",BOTTOM_RIGHT:"alignBottomRight",TOP_LEFT:"alignTopLeft",TOP_RIGHT:"alignTopRight",get:e,set:t,calculate:n}}(),TextFormat=function(){return{INLINE:"inline",INLINE_FIT:"inlineFit",INLINE_CLAMP:"inlineClamp",PARAGRAPH:"paragraph",PARAGRAPH_FIT:"paragraphFit",PARAGRAPH_CLAMP:"paragraphClamp"}}(),UIEvent=function(){var e=new CustomEvent("uiComponentEnabled"),t=new CustomEvent("uiSliderUpdate");return{ENABLED:"uiComponentEnabled",RESIZE:"uiResize",SLIDER_UPDATE:"uiSliderUpdate",componentEnabled:e,sliderUpdate:t}}(),FrameRate=new function(){function e(){if(!a){for(var t in i)i[t].tick();window.requestAnimationFrame(e)}}for(var t,n=this,a=!0,r=!0,i={},o=/iP(ad|hone|od).*OS 6/.test(window.navigator.userAgent),s=["webkit","moz"],l=0;!window.requestAnimationFrame&&l<s.length;l++)window.requestAnimationFrame=window[s[l]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[s[l]+"CancelAnimationFrame"]||window[s[l]+"CancelRequestAnimationFrame"];window.requestAnimationFrame&&window.cancelAnimationFrame&&!o||(window.requestAnimationFrame=function(e){return setTimeout(e,17)},window.cancelAnimationFrame=clearTimeout),n.register=function(e,t,a){a=a||30,i[a]||(i[a]=new FrameRateBase(a));for(var o=i[a].pool,s=0;s<o.length;s++)if(o[s].from===e&&o[s].handler===t)return;o.push({handler:t,from:e}),r&&n.resume()},n.unregister=function(e,t,a){for(var o in i)if(!a||o==a){for(var s=i[o].pool,l=0;l<s.length;l++)if(s[l].from===e&&s[l].handler===t){s.splice(l,1);break}0==s.length&&delete i[o]}0===Object.keys(i).length&&(n.pause(),r=!0)},n.pause=function(){if(arguments.length>0){for(var e=0;e<arguments.length;e++){var n=arguments[e];i[n]&&(i[n]._paused=!0,a=!0)}for(var o in i)if(!i[o]._paused){a=!1;break}}else{for(var o in i)i[o]._paused=!0;a=!0}a&&(r=!1,window.cancelAnimationFrame(t))},n.resume=function(){var n=!a;if(arguments.length>0)for(var o=0;o<arguments.length;o++){var s=arguments[o];i[s]&&(i[s]._paused=!1,a=!1)}else{for(var l in i)i[l]._paused=!1;a=!1}n||(r=!0,t=window.requestAnimationFrame(e))},n.secondsAsFrames=function(e){return 1/e}};FrameRateBase.prototype={resume:function(){var e=this;e._isPaused&&(e._startTime=Date.now(),e._prevCallTime=e._startTime,e._prevTime=e._startTime,e._nextTime=0,e._isPaused=!1)},tick:function(){var e=this;if(!e._paused){var t=!1,n=Date.now(),a=n-e._prevTime;a>e._maxLag&&(e._startTime+=a-e._shiftLag),e._prevTime=n;var r=e._prevTime-e._startTime,i=r-e._nextTime;i>0&&(e._nextTime+=i>=e._frameTime?i:e._frameTime,t=!0,e.diffTime=n-e._prevCallTime,e._prevCallTime=n),t&&e.dispatch()}},dispatch:function(){for(var e=this,t=0;t<e.pool.length;t++){var n=e.pool[t];n.handler.call(n.from,this)}}};var Gesture=new function(){function e(e){for(var n=null,a=0;a<s.length;a++)if(s[a].elem===e){n=s[a];break}return n||(n=t(e)),n}function t(e){var t=new GestureBase(e);return s.push(t),t}function n(t,n){var a=e(t);if(a.hasActiveChildren!=n){a.hasActiveChildren=n;for(var r=a.elem.getElementsByTagName("*"),i=0;i<r.length;i++)r[i].parentNode==t&&(n?o.enable(r[i]):o.disable(r[i]))}}function a(e,t,n,r){e.style.visibility="hidden",r.push(e);for(var i=document.elementFromPoint(t,n),o=0;o<l.length;o++)if(l[o].elem==i)return a(i,t,n,r);return i}function r(e){for(var t=[],n=a(e.target,e.clientX,e.clientY,t),r=0;r<t.length;r++)t[r].style.visibility="visible";return t=[],e.stopImmediatePropagation(),n}function i(e){var t=r(e),n=document.createEvent("HTMLEvents");n.initEvent(e.type,!0,!1),t.dispatchEvent(n)}var o=this,s=[],l=[],d=void 0!=document.createEventObject;o._kills={},o.add=o.addEventListener=function(t,n,a){var r=e(t);r.register(n,a),Styles.setCss(t,"cursor","pointer"),Styles.setCss(t,"pointer-events","auto")},o.remove=o.removeEventListener=function(t,n,a){var r=e(t);r&&(r.unregister(n,a),r.eventList.length<=0&&Styles.setCss(t,"cursor","auto"))},o.disable=function(t){var n=e(t);l.push(n),d?(n.register(GestureEvent.CLICK,i),Styles.setCss(t,"cursor","auto")):Styles.setCss(t,"pointer-events","none")},o.disableChildren=function(e){n(e,!1)},o.enable=function(t){for(var n=e(t),a=0;a<l.length;a++)if(n==l[a]){d?n.unregister(GestureEvent.CLICK,i):(Styles.setCss(t,"pointer-events","auto"),Styles.setCss(t,"cursor","pointer"));break}},o.enableChildren=function(e){n(e,!0)}};GestureBase.prototype={init:function(){var e=this;e._handleTouchStart=e._handleTouchStart.bind(e),e._handleDown=e._handleDown.bind(e),e._handleDrag=e._handleDrag.bind(e),e._handleUp=e._handleUp.bind(e),e._elemAdd=e.elem.addEventListener.bind(e.elem),e._elemRemove=e.elem.removeEventListener.bind(e.elem),e._reset()},register:function(e,t){var n=this;n.eventList.push(e),n._checkDragEnabled(),n._elemAdd(e,t)},unregister:function(e,t){var n=this,a=n.eventList.indexOf(e);a>=0&&n.eventList.splice(a,1),n._checkDragEnabled(),n._elemRemove(e,t)},_reset:function(){var e=this;e._cursor="mouse",e._start="down",e._end="up",e.elem.addEventListener("touchstart",e._handleTouchStart),e.elem.addEventListener("mousedown",e._handleDown)},_checkDragEnabled:function(){var e=this,t=e.eventList.join("").indexOf("onDrag");e._isDragEnabled=t>-1},_getEventScope:function(e){return e.changedTouches?e.changedTouches[0]:e},_add:function(e,t){window.addEventListener(this._cursor+e,t)},_remove:function(e,t){window.removeEventListener(this._cursor+e,t)},_handleDown:function(e){function t(e){if(!GestureEvent.stopped(e)){var t=new GestureEvent.Event(e,r,i,s,l,f,m);n.elem.dispatchEvent(t)}}var n=this;GestureEvent.startPoint(),n.elem.removeEventListener("touchstart",n._handleTouchStart),n.elem.removeEventListener("mousedown",n._handleDown),n._isDragging=!1,n._add(n._end,n._handleUp),n._add("move",n._handleDrag);var a=n._getEventScope(e),r=a.pageX,i=a.pageY,o=n.elem.getBoundingClientRect(),s=r-o.left,l=i-o.top,d=n.elem.x||Styles.getCss(n.elem,"x"),u=n.elem.y||Styles.getCss(n.elem,"y"),c=o.left-d,p=o.top-u;n._oX=c+s,n._oY=p+l;var f=r-n._oX,m=i-n._oY;n._sX=n._p1X=n._p2X=r,n._sY=n._p1Y=n._p2Y=i,t("onPress")},_handleUp:function(e,t){function n(e){if(!GestureEvent.stopped(e)){var t=new GestureEvent.Event(e,i,o,l,d,u,c,0,0,a._vX,a._vY);a.elem.dispatchEvent(t)}}var a=this;a._remove(a._end,a._handleUp),a._remove("move",a._handleDrag);var r=a._getEventScope(e),i=r.pageX,o=r.pageY,s=a.elem.getBoundingClientRect(),l=i-s.left,d=o-s.top,u=i-a._oX,c=o-a._oY;t!==!0&&n("onRelease"),a._isDragging?a._isDragEnabled&&a._dragEndOrSwipe("onDragStop"):i>s.left&&i<s.right&&o>s.top&&o<s.bottom&&n("onSelect"),a._isDragging&&a._dragEndOrSwipe("onSwipe"),a._reset(),e.preventDefault(),GestureEvent.endPoint()},_handleTouchStart:function(e){var t=this;t._cursor="touch",t._start="start",t._end="end",e.preventDefault(),t._handleDown(e)},_handleDrag:function(e){function t(e){if(!GestureEvent.stopped(e)){var t=new GestureEvent.Event(e,r,i,f,m,u,c,n._p1X-n._sX,n._p1Y-n._sY,n._vX,n._vY);n.elem.dispatchEvent(t)}}var n=this,a=n._getEventScope(e),r=a.pageX,i=a.pageY,o=r-n._p1X,s=r-n._p2X;n._vX=(s-o)/2+o;var l=i-n._p1Y,d=i-n._p2Y;n._vY=(d-l)/2+l;var u=r-n._oX,c=i-n._oY,p=n.elem.getBoundingClientRect(),f=r-p.left,m=i-p.top;n._isDragging?n._isDragEnabled&&t("onDrag"):(Math.abs(n._sX-r)>n._give||Math.abs(n._sY-i)>n._give)&&(n._isDragging=!0,n._isDragEnabled&&t("onDragStart")),n._p2X=n._p1X,n._p1X=r,n._p2Y=n._p1Y,n._p1Y=i},_dragEndOrSwipe:function(e){var t=this;if(!GestureEvent.stopped(name)){var n=t.elem.getBoundingClientRect(),a=new GestureEvent.Event(e,t._p1X,t._p1Y,t._p1X-n.left,t._p1Y-n.top,t._p1X-t._oX,t._p1Y-t._oY,t._p2X-t._sX,t._p2Y-t._sY,t._vX,t._vY);t.elem.dispatchEvent(a)}}};var GestureEvent=new function(){function e(e,t,n,a,r,i,o,s,l,d,u){var c=new CustomEvent(e);return c.mouse={global:{x:t,y:n},local:{x:a,y:r}},c.element={x:i||0,y:o||0},c.distance={x:s||0,y:l||0},c.velocity={x:d||0,y:u||0},c.direction={x:d>0?"right":0>d?"left":null,y:u>0?"down":0>u?"up":null},c}function t(e){e&&(e.stopImmediatePropagation(),i[e.type]=!0)}function n(e){return void 0!=i[e]}function a(){o||(o=!0,i={})}function r(){o=!1}var i={},o=!1;return{OVER:"mouseover",OUT:"mouseout",MOVE:"mousemove",PRESS:"onPress",RELEASE:"onRelease",CLICK:"onSelect",DRAG:"onDrag",DRAG_START:"onDragStart",DRAG_STOP:"onDragStop",SWIPE:"onSwipe",stop:t,Event:e,stopped:n,startPoint:a,endPoint:r}},Matrix2D=function(){var e=this;e.identity=new Float32Array([1,0,0,0,1,0]),e.data=new Float32Array(e.identity)};Matrix2D.prototype={clear:function(){var e=this;e.data.set(e.identity)},rotate:function(e){var t=this,n=new Float32Array(t.identity),a=Math.cos(e).toFixed(15),r=Math.sin(e).toFixed(15);return n[0]=a,n[1]=r,n[3]=-r,n[4]=a,t.multiply(n),t},scale:function(e,t){var n=this,a=new Float32Array(n.identity);return a[0]=e,a[4]=t,n.multiply(a),n},skew:function(e,t){var n=this,a=new Float32Array(n.identity);return a[1]=Math.tan(e),a[3]=Math.tan(t),n.multiply(a),n},translate:function(e,t){var n=this,a=new Float32Array(n.identity);return a[2]=e||0,a[5]=t||0,n.multiply(a),n},multiply:function(e){for(var t=this,n=new Float32Array(t.data),a=0;6>a;a++){var r=3*Math.floor(a/3),i=a%3;t.data[a]=n[r]*e[i]+n[r+1]*e[i+3]}t.data[2]+=n[2],t.data[5]+=n[5]},setFromCss:function(e){var t=e.match(/\(([^\)]+)\)/)[1].replace(/\s/g,"").split(",").map(Number);this.data=[t[0],t[1],t[4],t[2],t[3],t[5]]},getCss:function(){var e=this;return"matrix("+e.data[0]+","+e.data[1]+","+e.data[3]+","+e.data[4]+","+e.data[2]+","+e.data[5]+")"}};var MathUtils=new function(){var e=this;e.toRadians=function(e){return Math.PI/180*e},e.toDegrees=function(e){return 180/Math.PI*e},e.random=function(e,t,n){t=t||0,n=void 0!=n&&n>0?n:1;var a=Math.min(e,t),r=Math.max(e,t);a=Math.ceil(a/n)*n,r=Math.floor(r/n)*n;var i=a+Math.floor(Math.random()*((r-a+n)/n))/(1/n);return i},e.randomBoolean=function(e){return e=e||.5,Math.random()<e},e.randomWeightedKey=function(t){var n=[],a=[0];for(var r in t)n.push(r),a.push(t[r]+(a[a.length-1]||0));for(var i=100*Math.random().toFixed(2),o=0;o<a.length-1;o++){var s=e.inRange(i,a[o],a[o+1]);if(s)return n[o]}},e.rel=function(e,t,n,a,r){return(r-n)/(a-n)*(t-e)+e},e.inRange=function(e,t,n){var a=Math.min(t,n),r=Math.max(t,n);return r>=e&&e>=a},e.isNumber=function(e){return!isNaN(e)},e.toNumber=function(e){return+e},e.restrict=function(e,t,n){return Math.max(t,Math.min(n,e))},e.getAnglePoint=function(e,t,n,a){var e=e+Math.cos(a)*n,t=t+Math.sin(a)*n;return[e,t]},e.getAngle=function(e,t,n,a){return n=n||0,a=a||0,Math.atan2(a-t,n-e)},e.getDistance=function(e,t,n,a){return n=n||0,a=a||0,Math.sqrt((a-t)*(a-t)+(n-e)*(n-e))}},Clamp=function(){function e(e,n,a,r){var i=Markup.get(e);r=r!==!1;var o=i.childNodes,s=[],l={};/(x)/gi.exec(n)&&(l.x={}),/(y)/gi.exec(n)&&(l.y={});for(var d=0;d<o.length;d++){var u=o[d];s[d]={};for(var c in l){var p=Styles.getCss(u,c),f=u[t[c][0]],m=p+f,g=l[c];0==d&&(g.min=p,g.max=m),p<g.min&&(g.min=p),g.max<m&&(g.max=m),s[d][c]=p}}var v={top:0,bottom:0,left:0,right:0};if(a)for(var h in v)v[h]=isNaN(a)?a[h]||0:a;var y={};for(var c in l){var b=l[c];r&&(y[c]=b.min+Styles.getCss(i,c)-v[t[c][2]]),y[t[c][1]]=b.max-b.min+v[t[c][2]]+v[t[c][3]]}for(Styles.setCss(i,y),d=0;d<o.length;d++){var u=o[d],y={};for(var c in l)y[c]=s[d][c]-l[c].min+v[t[c][2]];Styles.setCss(u,y)}}var t={x:["offsetWidth","width","left","right"],y:["offsetHeight","height","top","bottom"]};return{X:"clampX",Y:"clampY",XY:"clampXY",set:e}}(),DcsUtils=new function(){var e=this;e.counterWithVars=function(e,t){t?Enabler.reportCustomVariableCount1(e):Enabler.reportCustomVariableCount2(e)},e.addVideoMetrics=function(e,t){Enabler.loadModule(studio.module.ModuleId.VIDEO,function(){studio.video.Reporter.attach(t||"Video Report 1",e instanceof VideoPlayer?e.screen:e)})},e.addYouTubeVideoMetrics=function(e){var t=e.screen;t.addEventListener(MediaEvent.PLAY,function(){e.isReplay?trackVideoReplay.call():trackVideoPlay.call()}),t.addEventListener(MediaEvent.PAUSE,function(){e.complete||trackVideoPause.call()}),t.addEventListener(MediaEvent.COMPLETE,function(){trackVideoComplete.call()})}},MediaEvent=new function(){return{AUTOPLAY:"autoplay",BUFFER:"waiting",COMPLETE:"complete",FAIL:"fail",MUTE:"mute",PAUSE:"pause",PLAY:"play",PROGRESS:"progress",READY:"canplay",STOP:"stop",UNMUTE:"unmute"}},FullScreen=new function(){var e=this;e.isFullScreen=function(){return document.fullscreenElement||document.mozFullScreenElement||document.webkitFullscreenElement||document.msFullscreenElement},e.enter=function(t){e.isFullScreen()||(t.requestFullscreen?t.requestFullscreen():t.msRequestFullscreen?t.msRequestFullscreen():t.mozRequestFullScreen?t.mozRequestFullScreen():t.webkitRequestFullscreen&&t.webkitRequestFullscreen())},e.exit=function(){e.isFullScreen()&&(document.exitFullscreen?document.exitFullscreen():document.msExitFullscreen?document.msExitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitExitFullscreen&&document.webkitExitFullscreen())}},PrepareCommon=new function(){var e,t=this;t.completeCallback,t.init=function(n){t.completeCallback=n,e=new Async,e.onComplete(t.initComplete),e.wait(),e.done()},t.initComplete=function(){e=new Async,e.onComplete(t.completeCallback),e.wait(),t.prepareAdData(),t.loadImageQueue(),e.done()},t.prepareAdData=function(){global.adData=new AdData(global.adParams.currentJsonData)},t.loadImageQueue=function(){e.wait(),ImageManager.load(t.loadImageQueueComplete,t.loadImageQueueFail)},t.loadImageQueueFail=function(){global.failAd()},t.loadImageQueueComplete=function(){e.done()}},EdgeData=function(e){var t=this;e=e||{},t.getMaskCssFor=function(e){return"-webkit-clip-path: "+t.convertMaskShapeToMaskCss(t.getMaskShapeBy(e).update())},t.getMaskShapeBy=function(e){for(var t in maskShapes)if(t==e)return maskShapes[t]},t.convertMaskShapeToMaskCss=function(e){for(var t="polygon( ",n=0;n<e.length;n++)t+=String(e[n][0])+"px "+String(e[n][1])+"px, ";return t.slice(0,t.length-2)+" )"}},Expandable=new function(){function e(e){r.call()}function t(e){i.call(),l.userHasInteracted=d,d=!0}function n(e){o.call(),l.userHasInteracted=!0}function a(e){s.call(),l.userHasInteracted=!0}var r,i,o,s,l=this,d=!0;l.userHasInteracted=!1,l.init=function(u){u=u||{},r=u.expandStart||function(){},i=u.expandComplete||function(){},o=u.collapseStart||function(){},s=u.collapseComplete||function(){},Enabler.addEventListener(studio.events.StudioEvent.EXPAND_START,e),Enabler.addEventListener(studio.events.StudioEvent.EXPAND_FINISH,t),Enabler.addEventListener(studio.events.StudioEvent.COLLAPSE_START,n),Enabler.addEventListener(studio.events.StudioEvent.COLLAPSE_FINISH,a),adParams.expandable.expanded&&(d=!1,Enabler.setStartExpanded(!0),l.expand())},l.collapse=function(e){e&&GestureEvent.stop(e),n(),Enabler.requestCollapse(),e&&Enabler.reportManualClose()},l.expand=function(t){t&&GestureEvent.stop(t),e(),Enabler.requestExpand()},l.collapseComplete=function(){a(),Enabler.finishCollapse()},l.expandComplete=function(){t(),Enabler.finishExpand()}};ExpandCloseButton.prototype={_init:function(e){var t=this;t.container=new UIComponent({target:e.target,id:e.id,css:{backgroundColor:"rgba(0, 0, 0, 0)",cursor:"pointer"}}),e.textField.target=t.container,e.textField.bufferText={top:3},t.color=e.textField.css.color||"#000000",t.overColor=e.textField.css.overColor||"#ffffff",t.textField=new UITextField(e.textField),e.icon.target=t.container,t.icon=new UIImage(e.icon),Align.set(t.icon,{x:{type:Align.LEFT,offset:e.icon.css?e.icon.css.x||0:t.textField.width+5},y:{type:Align.CENTER,offset:e.icon.css?e.icon.css.y||0:0}}),Align.set(t.textField,{y:Align.CENTER}),Clamp.set(t.container,Clamp.XY),Align.set(t.container,e.align),e.target.height<=adParams.expandable.collapsedHeight&&(t.container.height=adParams.expandable.collapsedHeight-2*t.container.y),e.css&&(e.css.width&&(t.container.width=e.css.width),e.css.height&&(t.container.height=e.css.height)),e.iconOver&&(e.iconOver.target=t.container,e.iconOver.css=e.iconOver.css||{},e.iconOver.css.opacity=0,t.iconOver=new UIImage(e.iconOver),t.iconOver.x=t.icon.x,t.iconOver.y=t.icon.y),Gesture.disableChildren(t.container),Gesture.add(t.container,GestureEvent.CLICK,e.onClick),Gesture.add(t.container,GestureEvent.OVER,t.handleOver.bind(t)),Gesture.add(t.container,GestureEvent.OUT,t.handleOut.bind(t))},handleOver:function(){var e=this;e.iconOver&&TweenLite.to(e.iconOver,.2,{alpha:1}),TweenLite.to(e.textField,.2,{color:e.overColor})},handleOut:function(){var e=this;e.iconOver&&TweenLite.to(e.iconOver,.2,{alpha:0}),TweenLite.to(e.textField,.2,{color:e.color})}};var ViewStyles={},Views={},Control=new function(){function e(){adData.canClose&&Control.close(),Control.disableClose(null,!0)}this.prepareBuild=function(){setTimeout(function(){Control.preMarkup(),View.buildCollapsed(),View.buildExpanded(),View.buildMainYouTubePlayer(),View.buildExpandCollapseUI(),View.buildBorder(),Control.postMarkup(),Animation.startAd()},1e3)},this.preMarkup=function(){},this.postMarkup=function(){Gesture.add(adData.elements.collapsedContainer,GestureEvent.CLICK,function(e){e.target!=adData.elements.btnCollapse.container&&e.target!=adData.elements.btnExpand.container&&Network.exit(collapsedExit)}),Gesture.add(adData.elements.expandedContainer,GestureEvent.CLICK,function(e){e.target!=adData.elements.btnCollapse.container&&e.target!=adData.elements.btnExpand.container&&(Network.exit(expandedExit),Control.close(),adParams.expandable.collapseOnExit&&Expandable.collapse())}),Gesture.add(adData.elements.expandedContainer,GestureEvent.OUT,Control.checkForClose),Gesture.add(adData.elements.expandedContainer,GestureEvent.OVER,Control.disableClose),Gesture.add(adData.elements.graffiti,GestureEvent.OVER,Control.disableClose),Gesture.add(adData.elements.buttonCta.container,GestureEvent.OVER,Control.disableClose),Gesture.add(adData.elements.btnCollapse.container,GestureEvent.OVER,Control.disableClose),Gesture.add(adData.elements.mainYouTubePlayer.container,GestureEvent.OVER,Control.disableClose),Gesture.add(adData.elements.mainYouTubePlayer.screen,GestureEvent.OVER,Control.disableClose),Expandable.init({expandStart:Animation.expandStart,expandComplete:Control.handleExpandComplete,collapseStart:Animation.collapseStart,
collapseComplete:Control.handleCollapseFinish}),adParams.expandable.expanded?adData.elements.collapsedContainer.hide():adData.elements.expandedContainer.hide(),DcsUtils.addYouTubeVideoMetrics(adData.elements.mainYouTubePlayer)},this.checkForClose=function(t){if(adData.expandComplete)switch(t.target){case adData.elements.btnCollapse.container:case adData.elements.graffiti:case adData.elements.mainYouTubePlayer.container:case adData.elements.mainYouTubePlayer.screen:case adData.elements.buttonCta.container:case adData.elements.buttonCta.btn:var n=!1;(t.clientY<=0||t.clientY>=adParams.adHeight||t.clientX<=0||t.clientX>=adParams.adWidth)&&(n=!0),n&&(adData.canClose=!0,adData.closeTimeout=setTimeout(e,adData.closeDelay));break;default:var n=!0;t.clientX>=adData.elements.mainYouTubePlayer.container.x&&t.clientX<=adData.elements.mainYouTubePlayer.container.x+adData.elements.mainYouTubePlayer.container.width&&t.clientY>=adData.elements.mainYouTubePlayer.container.y&&t.clientY<=adData.elements.mainYouTubePlayer.container.y+adData.elements.mainYouTubePlayer.container.height&&(n=!1),n&&(adData.canClose=!0,adData.closeTimeout=setTimeout(e,adData.closeDelay))}},this.disableClose=function(e,t){var n=t||!1;if(e&&adData.expandComplete)switch(e.target){case adData.elements.expandedContainer:case adData.elements.graffiti:case adData.elements.btnCollapse.container:case adData.elements.buttonCta.container:case adData.elements.buttonCta.btn:case adData.elements.mainYouTubePlayer.container:case adData.elements.mainYouTubePlayer.screen:n=!0}n&&(adData.canClose=!1,adData.closeTimeout&&(adData.closeTimeout=clearTimeout(adData.closeTimeout)))},this.handleExpandComplete=function(){adData.expandComplete=!0,adData.showMainVid&&(TweenLite.fromTo(adData.elements.mainYouTubePlayer.container,.3,{alpha:0},{alpha:1,ease:Quad.easeIn,delay:.2}),TweenLite.fromTo(adData.elements.buttonCta.container,.5,{alpha:0},{alpha:1,ease:Power1.easeOut}),adData.elements.mainYouTubePlayer.play())},this.handleCollapseFinish=function(){adData.elements.collapsedContainer.show(),adData.elements.btnCollapse.container.show(),TweenLite.to(adData.elements.expandedContainer,.4,{alpha:0,ease:Quad.easeInOut,onComplete:adData.elements.expandedContainer.hide})},this.handleMainYouTubeComplete=function(e){},this.close=function(e){e&&GestureEvent.stop(e),adData.elements.mainYouTubePlayer.seek(0),adData.elements.mainYouTubePlayer.pause(),adData.expandComplete=!1,adData.showMainVid=!1,TweenLite.set(adData.elements.buttonCta.container,{alpha:0}),Expandable.collapse()}},View=new function(){this.buildCollapsed=function(){adData.elements.collapsedContainer=new UIComponent({id:"collapsed-container",target:adData.elements.redAdContainer,css:{x:adParams.expandable.collapsedX,y:adParams.expandable.collapsedY,width:adParams.expandable.collapsedWidth,height:adParams.expandable.collapsedHeight,overflow:"hidden",backgroundColor:"#000000"}}),adData.elements.artCollapsed=new UIImage({target:adData.elements.collapsedContainer,source:"exp_image",id:"artCollapsed",css:{y:-267}}),adData.elements.collapsed_bg=new UIImage({target:adData.elements.collapsedContainer,source:"collapsed_bg",css:{x:0,y:0}}),adData.elements.collapsedCta=new ExpandCollapseCTA({target:adData.elements.collapsedContainer,id:"collapsed",btnAlignment:{x:Align.CENTER,y:{type:Align.BOTTOM,against:"details",outer:!0,offset:5},snap:!0}}),Align.set(adData.elements.collapsedCta.container,{x:{type:Align.LEFT,offset:8},y:Align.CENTER,snap:!0})},this.buildExpanded=function(){adData.elements.expandedContainer=new UIComponent({id:"expanded-container",target:adData.elements.redAdContainer,css:{x:adParams.expandable.expandedX,y:adParams.expandable.expandedY,width:adParams.adWidth,height:adParams.adHeight,overflow:"hidden",backgroundColor:"#000000"}}),adData.elements.graffiti=new UIImage({target:adData.elements.expandedContainer,source:"exp_bg",css:{x:0,y:0}}),adData.elements.artExpanded=new UIImage({target:adData.elements.expandedContainer,source:"exp_image",id:"artExpanded",css:{y:-267}}),adData.hideForIntro.push(adData.elements.artExpanded);for(var e=0;e<adData.hideForIntro.length;e++)Gesture.disable(adData.hideForIntro[e]),Gesture.disableChildren(adData.hideForIntro[e]);adData.elements.buttonCta=new ExpandCollapseCTA({target:adData.elements.expandedContainer,id:"expanded",btnAlignment:{x:{type:Align.LEFT,against:"details",outer:!0,offset:14}},detailsAlign:{y:Align.CENTER,snap:!0}}),Styles.setCss(adData.elements.buttonCta.container,{opacity:0}),Gesture.disable(adData.elements.graffiti),Gesture.disableChildren(adData.elements.graffiti),adData.elements.graffiti.hide(),Align.set(adData.elements.buttonCta.container,{x:{type:Align.LEFT,offset:485},y:{type:Align.BOTTOM,offset:-28},snap:!0}),adData.hideForIntro.push(adData.elements.buttonCta.btn),Styles.setCss(adData.elements.expandedContainer,{"background-color":"#000000"})},this.buildMainYouTubePlayer=function(){adData.elements.mainYouTubePlayer=new YouTubePlayer({id:"mainVideo",target:adData.elements.expandedContainer,css:{width:524,height:292,x:414,y:38},videoId:"3seM-sF-NZw",autoPlay:!1,muted:!1,quality:"hd720",showInfo:!1,inlineYouTubeLogo:!0,allowFullScreen:!1,allowAnnotations:!0,nativeControls:!0,onReady:null,onComplete:Control.handleMainYouTubeComplete,onFail:global.failAd,onPlay:null,onPause:null,onBuffer:null,controls:!0}),new UIBorder({id:"mainVideoBorder",target:adData.elements.mainYouTubePlayer.container,size:1,color:"#ffffff"}),Styles.setCss(adData.elements.mainYouTubePlayer.container,"display","none")},this.buildExpandCollapseUI=function(){var e={x:{type:Align.RIGHT,offset:35},y:{type:Align.TOP,offset:-3}};adData.elements.btnCollapse=new ExpandCloseButton({target:adData.elements.expandedContainer,id:"btnCollapse",align:e,onClick:function(e){Control.close(e)},textField:{css:{width:150,height:40,color:"#FFFFFF",overColor:"#FFFFFF"},fontSize:16,fontFamily:"futura_std_med_min",format:TextFormat.INLINE_CLAMP,alignText:Align.LEFT,text:""},icon:{source:"btn_close",css:{x:38,y:2}}}),adData.elements.btnExpand=new ExpandCloseButton({target:adData.elements.collapsedContainer,id:"btnExpand",align:e,onClick:function(e){GestureEvent.stop(e),adData.clickExpand=!0,Expandable.expand()},textField:{css:{width:150,height:40,color:"#FFFFFF",overColor:"#FFFFFF"},fontSize:16,fontFamily:"futura_std_med_min",format:TextFormat.INLINE_CLAMP,alignText:Align.LEFT,text:""},icon:{source:"btn_expand",css:{x:27,y:2}}})},this.buildBorder=function(){new UIBorder({target:adData.elements.collapsedContainer,size:2,color:"#FFFFFF"}),new UIBorder({target:adData.elements.collapsedContainer,size:1,color:"#000000"}),new UIBorder({target:adData.elements.expandedContainer,size:2,color:"#FFFFFF"}),new UIBorder({target:adData.elements.expandedContainer,size:1,color:"#0000000"})}},Animation=new function(){this.startAd=function(){Styles.setCss(global.adData.elements.redAdContainer,{opacity:1});var e=Markup.get("preloader");TweenLite.to(e,.5,{alpha:0,ease:Quad.easeInOut,onComplete:global.removePreloader}),Animation.startScene()},this.startScene=function(){if(adData.firstCollapse){TweenLite.to(adData.elements.artCollapsed,.4,{alpha:1});for(var e=0;e<adData.hideForIntro.length;e++)adData.hideForIntro[e].show();TweenLite.set(adData.elements.artCollapsed,{y:-267}),adData.firstCollapse=!1}},this.expandStart=function(){adData.elements.graffiti.show(),TweenLite.set(adData.elements.graffiti,{alpha:1}),TweenLite.fromTo(adData.elements.artCollapsed,.5,{y:-267},{x:0,onComplete:function(){adData.elements.expandedContainer.show(),TweenLite.set(adData.elements.expandedContainer,{alpha:1}),adData.elements.collapsedContainer.hide(),adData.clickExpand&&(Styles.setCss(adData.elements.mainYouTubePlayer.container,"display","inherit"),TweenLite.set(adData.elements.mainYouTubePlayer.container,{alpha:0}),adData.showMainVid=!0),TweenLite.fromTo(adData.elements.expandedContainer,.5,{height:adParams.expandable.collapsedHeight},{x:adParams.expandable.expandedX,y:adParams.expandable.expandedY,width:adParams.adWidth,height:adParams.adHeight,onComplete:Expandable.expandComplete}),TweenLite.fromTo(adData.elements.artExpanded,.5,{y:0},{y:0}),adData.clickExpand=!1}})},this.collapseStart=function(){TweenLite.killTweensOf(adData.elements.graffiti),TweenLite.killTweensOf(adData.elements.buttonCta),TweenLite.killTweensOf(adData.elements.mainYouTubePlayer.container),TweenLite.to(adData.elements.mainYouTubePlayer.container,.5,{alpha:0,ease:Quad.easeInOut}),TweenLite.to(adData.elements.expandedContainer,.5,{x:adParams.expandable.collapsedX,y:adParams.expandable.collapsedY,width:adParams.expandable.collapsedWidth,height:adParams.expandable.collapsedHeight,onComplete:Expandable.collapseComplete}),TweenLite.to(adData.elements.artExpanded,.5,{y:0}),TweenLite.to(adData.elements.graffiti,.5,{x:0})}},ExpandCollapseCTA=function(e){function t(e){var t=e.target||adData.elements.redAdContainer,o=e.id,s=o+"_cta",l=e.btnAlignment;i.container=new UIComponent({id:s,target:t}),i.details=new UIImage({id:s+"_details",target:i.container,source:s+"_details_txt"}),Gesture.disable(i.container),Gesture.disable(i.details),l.x&&(l.x.against=i.details),l.y&&(l.y.against=i.details),Clamp.set(i.container,Clamp.XY),i.btn=new UIButton({id:s+"_btn",target:i.container,css:{overflow:"hidden"},align:l,icon:[i.over=new UIImage({source:s+"_over",css:{}})],onClick:n,onOver:a,onOut:r}),i.over.x=-i.over.width;var d=new UIImage({id:"ExpandedCTA_btn_bg",target:i.btn,source:s+"_bg"}),u=new UIImage({id:"ExpandedCTA_btn_txt",target:i.btn,source:s+"_txt",align:{x:Align.CENTER,y:Align.CENTER,snap:!0}});Gesture.disable(d),Gesture.disable(u),Clamp.set(i.container,Clamp.XY),e.detailsAlign&&Align.set(i.details,e.detailsAlign)}function n(){}function a(){TweenLite.to(i.over,.25,{x:0,ease:Circ.easeOut})}function r(){TweenLite.to(i.over,.5,{x:-i.over.width,ease:Quad.easeInOut})}var i=this;return i.container,i.details,i.over,t(e),i};